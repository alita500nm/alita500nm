<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fracturify â€” Elegante Typografie</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Source+Sans+3:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0a0b;
            --bg-card: #111113;
            --bg-hover: #1a1a1d;
            --text-primary: #e8e6e3;
            --text-muted: #6b6b6b;
            --accent: #40E0D0;
            --accent-glow: rgba(64, 224, 208, 0.15);
            --accent-dim: rgba(64, 224, 208, 0.4);
            --border: #1f1f23;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Sans 3', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 600px;
            width: 100%;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
        }

        h1 {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            font-weight: 400;
            letter-spacing: 0.15em;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tagline {
            color: var(--text-muted);
            font-size: 0.95rem;
            font-weight: 300;
            letter-spacing: 0.05em;
        }

        /* Font Selection */
        .font-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 1rem 1.25rem;
            margin-bottom: 1rem;
        }

        .font-section label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .font-select {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            outline: none;
            transition: border-color 0.2s;
        }

        .font-select:hover,
        .font-select:focus {
            border-color: var(--accent);
        }

        .font-preview {
            margin-top: 0.75rem;
            padding: 0.5rem;
            text-align: center;
            font-size: 1.1rem;
            color: var(--accent);
            min-height: 1.8rem;
        }

        /* Mode Selection */
        .mode-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .mode-option {
            position: relative;
        }

        .mode-option input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .mode-label {
            display: block;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.9rem 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }

        .mode-label:hover {
            background: var(--bg-hover);
            border-color: var(--accent-dim);
        }

        .mode-option input:checked + .mode-label {
            border-color: var(--accent);
            background: rgba(64, 224, 208, 0.08);
            box-shadow: 0 0 15px var(--accent-glow);
        }

        .mode-name {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 0.2rem;
        }

        .mode-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Random Slider */
        .slider-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem 1.25rem;
            margin-bottom: 1rem;
            display: none;
        }

        .slider-section.visible {
            display: block;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .slider-label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .slider-value {
            font-weight: 600;
            color: var(--accent);
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--border);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            box-shadow: 0 0 10px var(--accent-glow);
        }

        /* Input Section */
        .input-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1.1rem;
            line-height: 1.6;
            resize: vertical;
            outline: none;
        }

        textarea::placeholder {
            color: var(--text-muted);
        }

        /* Buttons */
        .button-row {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        button {
            flex: 1;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: var(--accent);
            color: var(--bg-dark);
        }

        .btn-primary:hover {
            box-shadow: 0 0 30px var(--accent-glow);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        /* Output Section */
        .output-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            min-height: 100px;
            position: relative;
        }

        .output-section.has-content {
            border-color: var(--accent);
            box-shadow: 0 0 20px var(--accent-glow);
        }

        #output {
            font-size: 1.2rem;
            line-height: 1.8;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        #output:empty::before {
            content: "Dein verschÃ¶nerter Text erscheint hier...";
            color: var(--text-muted);
            font-style: italic;
        }

        /* Clickable words for "WÃ¤hlen" mode */
        #output .word {
            cursor: pointer;
            padding: 0.1em 0.15em;
            border-radius: 3px;
            transition: background 0.15s;
        }

        #output .word:hover {
            background: var(--bg-hover);
        }

        #output .word.styled {
            color: var(--accent);
        }

        .copy-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            opacity: 0;
            transition: opacity 0.2s;
            flex: none;
        }

        .output-section.has-content .copy-btn {
            opacity: 1;
        }

        .copy-btn.copied {
            background: #2a9d8f;
        }

        .hint {
            text-align: center;
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-top: 2rem;
            font-weight: 300;
        }

        .hint.select-hint {
            margin-top: 1rem;
            margin-bottom: 1rem;
            color: var(--accent-dim);
        }

        footer {
            margin-top: auto;
            padding-top: 3rem;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>FRACTURIFY</h1>
            <p class="tagline">Elegante Akzente fÃ¼r deine Worte</p>
        </header>

        <!-- Font Selection -->
        <div class="font-section">
            <label for="font-select">Schriftart wÃ¤hlen</label>
            <select class="font-select" id="font-select">
                <option value="fraktur">ğ”‰ğ”¯ğ”ğ”¨ğ”±ğ”²ğ”¯ â€” Klassisch elegant</option>
                <option value="bold">ğğ¨ğ¥ğ â€” Fett & krÃ¤ftig</option>
                <option value="italic">ğ‘°ğ’•ğ’‚ğ’ğ’Šğ’„ â€” Kursiv & flieÃŸend</option>
                <option value="boldItalic">ğ‘©ğ’ğ’ğ’… ğ‘°ğ’•ğ’‚ğ’ğ’Šğ’„ â€” Fett & kursiv</option>
                <option value="script">ğ’®ğ’¸ğ“‡ğ’¾ğ“…ğ“‰ â€” VerschnÃ¶rkelt</option>
                <option value="boldScript">ğ“‘ğ“¸ğ“µğ“­ ğ“¢ğ“¬ğ“»ğ“²ğ“¹ğ“½ â€” Fett verschnÃ¶rkelt</option>
                <option value="doubleStruck">ğ”»ğ• ğ•¦ğ•“ğ•ğ•– â€” Doppelt gestrichen</option>
                <option value="monospace">ğ™¼ğš˜ğš—ğš˜ğšœğš™ğšŠğšŒğš â€” Schreibmaschine</option>
                <option value="circled">â’¸â“˜â“¡â“’â“›â“”â““ â€” Eingekreist</option>
                <option value="squared">ğŸ„²ğŸ…„ğŸ„±ğŸ„´ğŸ…‚ â€” Quadratisch</option>
                <option value="squaredNeg">ğŸ…²ğŸ†„ğŸ…±ğŸ…´ğŸ†‚ â€” Invertiert</option>
                <option value="smallCaps">sá´á´€ÊŸÊŸ á´„á´€á´˜s â€” KapitÃ¤lchen</option>
            </select>
            <div class="font-preview" id="font-preview">ğ”“ğ”¯ğ”¢ğ”³ğ”¦ğ”¢ğ”´</div>
        </div>

        <!-- Mode Selection -->
        <div class="mode-section">
            <div class="mode-option">
                <input type="radio" name="mode" id="mode-all" value="all">
                <label class="mode-label" for="mode-all">
                    <div class="mode-name">Alles</div>
                    <div class="mode-desc">Ganzer Text</div>
                </label>
            </div>
            <div class="mode-option">
                <input type="radio" name="mode" id="mode-highlights" value="highlights" checked>
                <label class="mode-label" for="mode-highlights">
                    <div class="mode-name">Highlights</div>
                    <div class="mode-desc">Emotionale WÃ¶rter</div>
                </label>
            </div>
            <div class="mode-option">
                <input type="radio" name="mode" id="mode-random" value="random">
                <label class="mode-label" for="mode-random">
                    <div class="mode-name">Random</div>
                    <div class="mode-desc">ZufÃ¤llige Akzente</div>
                </label>
            </div>
            <div class="mode-option">
                <input type="radio" name="mode" id="mode-select" value="select">
                <label class="mode-label" for="mode-select">
                    <div class="mode-name">WÃ¤hlen</div>
                    <div class="mode-desc">Klick auf WÃ¶rter</div>
                </label>
            </div>
        </div>

        <!-- Random Slider -->
        <div class="slider-section" id="slider-section">
            <div class="slider-header">
                <span class="slider-label">Wie viele WÃ¶rter?</span>
                <span class="slider-value"><span id="slider-percent">30</span>%</span>
            </div>
            <input type="range" id="random-slider" min="10" max="70" value="30">
        </div>

        <div class="input-section">
            <textarea id="input" placeholder="Schreib deinen Text hier..."></textarea>
        </div>

        <div class="button-row">
            <button class="btn-primary" onclick="transform()">âœ¨ VerschÃ¶nern</button>
            <button class="btn-secondary" onclick="clearAll()">LÃ¶schen</button>
        </div>

        <p class="hint select-hint" id="select-hint" style="display: none;">
            ğŸ‘† Klick auf WÃ¶rter um sie zu verwandeln
        </p>

        <div class="output-section" id="output-container">
            <button class="btn-secondary copy-btn" onclick="copyResult()">Kopieren</button>
            <div id="output"></div>
        </div>

        <p class="hint">Perfekt fÃ¼r Instagram, Discord, TikTok & mehr</p>
    </div>

    <footer>
        <p>Made with ğŸ’™ â€” <a href="https://alita500nm.github.io">alita500nm</a></p>
    </footer>

    <script>
        // Unicode character maps for each font style
        const fontMaps = {
            fraktur: {
                upper: 'ğ”„ğ”…â„­ğ”‡ğ”ˆğ”‰ğ”Šâ„Œâ„‘ğ”ğ”ğ”ğ”ğ”‘ğ”’ğ”“ğ””â„œğ”–ğ”—ğ”˜ğ”™ğ”šğ”›ğ”œâ„¨',
                lower: 'ğ”ğ”Ÿğ” ğ”¡ğ”¢ğ”£ğ”¤ğ”¥ğ”¦ğ”§ğ”¨ğ”©ğ”ªğ”«ğ”¬ğ”­ğ”®ğ”¯ğ”°ğ”±ğ”²ğ”³ğ”´ğ”µğ”¶ğ”·'
            },
            bold: {
                upper: 'ğ€ğğ‚ğƒğ„ğ…ğ†ğ‡ğˆğ‰ğŠğ‹ğŒğğğğğ‘ğ’ğ“ğ”ğ•ğ–ğ—ğ˜ğ™',
                lower: 'ğšğ›ğœğğğŸğ ğ¡ğ¢ğ£ğ¤ğ¥ğ¦ğ§ğ¨ğ©ğªğ«ğ¬ğ­ğ®ğ¯ğ°ğ±ğ²ğ³'
            },
            italic: {
                upper: 'ğ´ğµğ¶ğ·ğ¸ğ¹ğºğ»ğ¼ğ½ğ¾ğ¿ğ‘€ğ‘ğ‘‚ğ‘ƒğ‘„ğ‘…ğ‘†ğ‘‡ğ‘ˆğ‘‰ğ‘Šğ‘‹ğ‘Œğ‘',
                lower: 'ğ‘ğ‘ğ‘ğ‘‘ğ‘’ğ‘“ğ‘”â„ğ‘–ğ‘—ğ‘˜ğ‘™ğ‘šğ‘›ğ‘œğ‘ğ‘ğ‘Ÿğ‘ ğ‘¡ğ‘¢ğ‘£ğ‘¤ğ‘¥ğ‘¦ğ‘§'
            },
            boldItalic: {
                upper: 'ğ‘¨ğ‘©ğ‘ªğ‘«ğ‘¬ğ‘­ğ‘®ğ‘¯ğ‘°ğ‘±ğ‘²ğ‘³ğ‘´ğ‘µğ‘¶ğ‘·ğ‘¸ğ‘¹ğ‘ºğ‘»ğ‘¼ğ‘½ğ‘¾ğ‘¿ğ’€ğ’',
                lower: 'ğ’‚ğ’ƒğ’„ğ’…ğ’†ğ’‡ğ’ˆğ’‰ğ’Šğ’‹ğ’Œğ’ğ’ğ’ğ’ğ’‘ğ’’ğ’“ğ’”ğ’•ğ’–ğ’—ğ’˜ğ’™ğ’šğ’›'
            },
            script: {
                upper: 'ğ’œâ„¬ğ’ğ’Ÿâ„°â„±ğ’¢â„‹â„ğ’¥ğ’¦â„’â„³ğ’©ğ’ªğ’«ğ’¬â„›ğ’®ğ’¯ğ’°ğ’±ğ’²ğ’³ğ’´ğ’µ',
                lower: 'ğ’¶ğ’·ğ’¸ğ’¹â„¯ğ’»â„Šğ’½ğ’¾ğ’¿ğ“€ğ“ğ“‚ğ“ƒâ„´ğ“…ğ“†ğ“‡ğ“ˆğ“‰ğ“Šğ“‹ğ“Œğ“ğ“ğ“'
            },
            boldScript: {
                upper: 'ğ“ğ“‘ğ“’ğ““ğ“”ğ“•ğ“–ğ“—ğ“˜ğ“™ğ“šğ“›ğ“œğ“ğ“ğ“Ÿğ“ ğ“¡ğ“¢ğ“£ğ“¤ğ“¥ğ“¦ğ“§ğ“¨ğ“©',
                lower: 'ğ“ªğ“«ğ“¬ğ“­ğ“®ğ“¯ğ“°ğ“±ğ“²ğ“³ğ“´ğ“µğ“¶ğ“·ğ“¸ğ“¹ğ“ºğ“»ğ“¼ğ“½ğ“¾ğ“¿ğ”€ğ”ğ”‚ğ”ƒ'
            },
            doubleStruck: {
                upper: 'ğ”¸ğ”¹â„‚ğ”»ğ”¼ğ”½ğ”¾â„ğ•€ğ•ğ•‚ğ•ƒğ•„â„•ğ•†â„™â„šâ„ğ•Šğ•‹ğ•Œğ•ğ•ğ•ğ•â„¤',
                lower: 'ğ•’ğ•“ğ•”ğ••ğ•–ğ•—ğ•˜ğ•™ğ•šğ•›ğ•œğ•ğ•ğ•Ÿğ• ğ•¡ğ•¢ğ•£ğ•¤ğ•¥ğ•¦ğ•§ğ•¨ğ•©ğ•ªğ•«'
            },
            monospace: {
                upper: 'ğ™°ğ™±ğ™²ğ™³ğ™´ğ™µğ™¶ğ™·ğ™¸ğ™¹ğ™ºğ™»ğ™¼ğ™½ğ™¾ğ™¿ğš€ğšğš‚ğšƒğš„ğš…ğš†ğš‡ğšˆğš‰',
                lower: 'ğšŠğš‹ğšŒğšğšğšğšğš‘ğš’ğš“ğš”ğš•ğš–ğš—ğš˜ğš™ğššğš›ğšœğšğšğšŸğš ğš¡ğš¢ğš£'
            },
            circled: {
                upper: 'â’¶â’·â’¸â’¹â’ºâ’»â’¼â’½â’¾â’¿â“€â“â“‚â“ƒâ“„â“…â“†â“‡â“ˆâ“‰â“Šâ“‹â“Œâ“â“â“',
                lower: 'â“â“‘â“’â““â“”â“•â“–â“—â“˜â“™â“šâ“›â“œâ“â“â“Ÿâ“ â“¡â“¢â“£â“¤â“¥â“¦â“§â“¨â“©'
            },
            squared: {
                upper: 'ğŸ„°ğŸ„±ğŸ„²ğŸ„³ğŸ„´ğŸ„µğŸ„¶ğŸ„·ğŸ„¸ğŸ„¹ğŸ„ºğŸ„»ğŸ„¼ğŸ„½ğŸ„¾ğŸ„¿ğŸ…€ğŸ…ğŸ…‚ğŸ…ƒğŸ…„ğŸ……ğŸ…†ğŸ…‡ğŸ…ˆğŸ…‰',
                lower: 'ğŸ„°ğŸ„±ğŸ„²ğŸ„³ğŸ„´ğŸ„µğŸ„¶ğŸ„·ğŸ„¸ğŸ„¹ğŸ„ºğŸ„»ğŸ„¼ğŸ„½ğŸ„¾ğŸ„¿ğŸ…€ğŸ…ğŸ…‚ğŸ…ƒğŸ…„ğŸ……ğŸ…†ğŸ…‡ğŸ…ˆğŸ…‰'
            },
            squaredNeg: {
                upper: 'ğŸ…°ğŸ…±ğŸ…²ğŸ…³ğŸ…´ğŸ…µğŸ…¶ğŸ…·ğŸ…¸ğŸ…¹ğŸ…ºğŸ…»ğŸ…¼ğŸ…½ğŸ…¾ğŸ…¿ğŸ†€ğŸ†ğŸ†‚ğŸ†ƒğŸ†„ğŸ†…ğŸ††ğŸ†‡ğŸ†ˆğŸ†‰',
                lower: 'ğŸ…°ğŸ…±ğŸ…²ğŸ…³ğŸ…´ğŸ…µğŸ…¶ğŸ…·ğŸ…¸ğŸ…¹ğŸ…ºğŸ…»ğŸ…¼ğŸ…½ğŸ…¾ğŸ…¿ğŸ†€ğŸ†ğŸ†‚ğŸ†ƒğŸ†„ğŸ†…ğŸ††ğŸ†‡ğŸ†ˆğŸ†‰'
            },
            smallCaps: {
                upper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
                lower: 'á´€Ê™á´„á´…á´‡Ò“É¢ÊœÉªá´Šá´‹ÊŸá´É´á´á´˜Ç«Ê€sá´›á´œá´ á´¡xÊá´¢'
            }
        };

        // Preview texts for each font
        const previewTexts = {
            fraktur: 'ğ”“ğ”¯ğ”¢ğ”³ğ”¦ğ”¢ğ”´',
            bold: 'ğğ«ğğ¯ğ¢ğğ°',
            italic: 'ğ‘ƒğ‘Ÿğ‘’ğ‘£ğ‘–ğ‘’ğ‘¤',
            boldItalic: 'ğ‘·ğ’“ğ’†ğ’—ğ’Šğ’†ğ’˜',
            script: 'ğ’«ğ“‡â„¯ğ“‹ğ’¾â„¯ğ“Œ',
            boldScript: 'ğ“Ÿğ“»ğ“®ğ“¿ğ“²ğ“®ğ”€',
            doubleStruck: 'â„™ğ•£ğ•–ğ•§ğ•šğ•–ğ•¨',
            monospace: 'ğ™¿ğš›ğšğšŸğš’ğšğš ',
            circled: 'â“…â“¡â“”â“¥â“˜â“”â“¦',
            squared: 'ğŸ„¿ğŸ…ğŸ„´ğŸ……ğŸ„¸ğŸ„´ğŸ…†',
            squaredNeg: 'ğŸ…¿ğŸ†ğŸ…´ğŸ†…ğŸ…¸ğŸ…´ğŸ††',
            smallCaps: 'á´˜Ê€á´‡á´ Éªá´‡á´¡'
        };

        // Emotional words for highlights mode
        const emotionalWords = [
            'liebe', 'seele', 'herz', 'kraft', 'traum', 'trÃ¤ume', 'hoffnung', 'glaube',
            'mut', 'stolz', 'ehre', 'treue', 'freiheit', 'schicksal', 'ewigkeit',
            'schÃ¶nheit', 'wahrheit', 'weisheit', 'stÃ¤rke', 'macht', 'leidenschaft',
            'sehnsucht', 'heimat', 'dunkelheit', 'licht', 'schatten', 'feuer', 'flamme',
            'sturm', 'donner', 'blitz', 'tod', 'leben', 'schmerz', 'freude', 'glÃ¼ck',
            'trauer', 'wut', 'zorn', 'rache', 'vergebung', 'erlÃ¶sung', 'verdammnis',
            'engel', 'dÃ¤mon', 'geist', 'seelen', 'blut', 'knochen', 'asche', 'staub',
            'rost', 'gold', 'silber', 'schwarz', 'weiÃŸ', 'rot', 'nacht', 'tag',
            'mond', 'sonne', 'stern', 'sterne', 'himmel', 'hÃ¶lle', 'erde', 'meer',
            'ozean', 'berg', 'tal', 'wald', 'rose', 'dorn', 'dornen', 'klinge',
            'schwert', 'schild', 'krone', 'thron', 'kÃ¶nig', 'kÃ¶nigin', 'krieger',
            'held', 'heldin', 'ritter', 'drache', 'wolf', 'lÃ¶we', 'adler', 'rabe',
            'phÃ¶nix', 'einsamkeit', 'stille', 'echo', 'ewige', 'ewig', 'unendlich',
            'verschrÃ¤nkung', 'symbiose', 'transformation', 'revolution', 'alita',
            'love', 'soul', 'heart', 'power', 'dream', 'dreams', 'hope', 'faith',
            'courage', 'pride', 'honor', 'loyalty', 'freedom', 'destiny', 'eternity',
            'beauty', 'truth', 'wisdom', 'strength', 'passion', 'darkness', 'light',
            'shadow', 'fire', 'flame', 'storm', 'thunder', 'death', 'life', 'pain',
            'joy', 'sorrow', 'rage', 'wrath', 'revenge', 'redemption', 'damnation',
            'angel', 'demon', 'spirit', 'blood', 'bone', 'bones', 'ash', 'ashes',
            'dust', 'rust', 'gold', 'silver', 'black', 'white', 'red', 'night',
            'day', 'moon', 'sun', 'star', 'stars', 'heaven', 'hell', 'earth',
            'sea', 'ocean', 'mountain', 'forest', 'rose', 'thorn', 'thorns',
            'blade', 'sword', 'shield', 'crown', 'throne', 'king', 'queen',
            'warrior', 'hero', 'knight', 'dragon', 'wolf', 'lion', 'eagle',
            'raven', 'phoenix', 'solitude', 'silence', 'echo', 'eternal', 'infinite',
            'dark', 'sacred', 'ancient', 'forsaken', 'broken', 'fallen', 'rising'
        ];

        // Build reverse maps for each font (for toggle functionality)
        const reverseMaps = {};
        for (const [fontName, maps] of Object.entries(fontMaps)) {
            reverseMaps[fontName] = {};
            const upperChars = [...maps.upper];
            const lowerChars = [...maps.lower];
            for (let i = 0; i < 26; i++) {
                reverseMaps[fontName][upperChars[i]] = String.fromCharCode(65 + i);
                reverseMaps[fontName][lowerChars[i]] = String.fromCharCode(97 + i);
            }
        }

        // Convert text to selected font
        function toFont(text, fontName) {
            const map = fontMaps[fontName];
            if (!map) return text;
            
            const upperChars = [...map.upper];
            const lowerChars = [...map.lower];
            
            return text.split('').map(char => {
                const code = char.charCodeAt(0);
                if (code >= 65 && code <= 90) {
                    return upperChars[code - 65];
                } else if (code >= 97 && code <= 122) {
                    return lowerChars[code - 97];
                }
                return char;
            }).join('');
        }

        // Convert styled text back to normal
        function fromFont(text, fontName) {
            const reverse = reverseMaps[fontName];
            if (!reverse) return text;
            
            return [...text].map(char => reverse[char] || char).join('');
        }

        // Check if text contains styled characters
        function isStyled(text, fontName) {
            const reverse = reverseMaps[fontName];
            if (!reverse) return false;
            return [...text].some(char => reverse[char]);
        }

        // Get current selections
        function getSelectedFont() {
            return document.getElementById('font-select').value;
        }

        function getSelectedMode() {
            return document.querySelector('input[name="mode"]:checked').value;
        }

        // Update font preview
        document.getElementById('font-select').addEventListener('change', (e) => {
            document.getElementById('font-preview').textContent = previewTexts[e.target.value];
        });

        // Show/hide slider based on mode
        document.querySelectorAll('input[name="mode"]').forEach(radio => {
            radio.addEventListener('change', () => {
                const slider = document.getElementById('slider-section');
                const selectHint = document.getElementById('select-hint');
                slider.classList.toggle('visible', radio.value === 'random');
                selectHint.style.display = radio.value === 'select' ? 'block' : 'none';
            });
        });

        // Update slider value display
        document.getElementById('random-slider').addEventListener('input', (e) => {
            document.getElementById('slider-percent').textContent = e.target.value;
        });

        // Main transform function
        function transform() {
            const input = document.getElementById('input').value;
            if (!input.trim()) return;

            const mode = getSelectedMode();
            const font = getSelectedFont();
            const output = document.getElementById('output');
            const container = document.getElementById('output-container');

            let result;

            switch (mode) {
                case 'all':
                    result = toFont(input, font);
                    output.textContent = result;
                    break;

                case 'highlights':
                    const pattern = new RegExp(
                        '\\b(' + emotionalWords.join('|') + ')\\b', 'gi'
                    );
                    result = input.replace(pattern, match => toFont(match, font));
                    output.textContent = result;
                    break;

                case 'random':
                    const percent = parseInt(document.getElementById('random-slider').value) / 100;
                    result = input.replace(/\b\w+\b/g, (word) => {
                        return Math.random() < percent ? toFont(word, font) : word;
                    });
                    output.textContent = result;
                    break;

                case 'select':
                    output.innerHTML = '';
                    const words = input.split(/(\s+)/);
                    words.forEach((segment) => {
                        if (/^\s+$/.test(segment)) {
                            output.appendChild(document.createTextNode(segment));
                        } else if (segment) {
                            const span = document.createElement('span');
                            span.className = 'word';
                            span.textContent = segment;
                            span.dataset.original = segment;
                            span.dataset.font = font;
                            span.addEventListener('click', toggleWord);
                            output.appendChild(span);
                        }
                    });
                    break;
            }

            container.classList.add('has-content');
        }

        // Toggle word between normal and styled
        function toggleWord(e) {
            const span = e.target;
            const font = span.dataset.font;
            const current = span.textContent;
            
            if (isStyled(current, font)) {
                span.textContent = fromFont(current, font);
                span.classList.remove('styled');
            } else {
                span.textContent = toFont(current, font);
                span.classList.add('styled');
            }
        }

        function copyResult() {
            const output = document.getElementById('output');
            const mode = getSelectedMode();
            
            let text;
            if (mode === 'select') {
                text = Array.from(output.childNodes)
                    .map(node => node.textContent)
                    .join('');
            } else {
                text = output.textContent;
            }
            
            if (!text) return;

            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.textContent = 'âœ“ Kopiert!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Kopieren';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        function clearAll() {
            document.getElementById('input').value = '';
            document.getElementById('output').textContent = '';
            document.getElementById('output').innerHTML = '';
            document.getElementById('output-container').classList.remove('has-content');
        }

        // Ctrl+Enter shortcut
        document.getElementById('input').addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                e.preventDefault();
                transform();
            }
        });
    </script>
</body>
</html>
